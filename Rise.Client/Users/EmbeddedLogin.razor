@page "/embedded-login"
<link href="css/shared-form.css" rel="stylesheet" />

<PageTitle>Login</PageTitle>


<main class="main-content mt-0 ">
    <div class="page-header align-items-center min-vh-100">
        <div class="container my-auto">
            <div class="row">
                <div class="col-lg-6 col-md-8 col-sm-10 col-12 mx-auto">
                    <!-- Adjusted column sizes for larger screens -->
                    <div class="card z-index-0 fadeIn3 fadeInBottom" style="max-width: 440px;">
                        <div class="card-header p-0 position-relative mt-n4 mx-3 z-index-2">
                            <div class="bg-gradient-dark shadow-dark border-radius-lg py-3 pe-1">
                                <h1 class="text-white ms-3">@Localizer["Login"]</h1>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="form-card">
                                <EditForm Model="loginModel" OnValidSubmit="HandleLogin">
                                    <DataAnnotationsValidator />
                                    <div class="d-flex flex-column align-items-center px-3">
                                        <div
                                            class="d-md-flex flex-column flex-md-row justify-content-center align-items-center mb-2">
                                            <label style="min-width: 80px;">@Localizer["Email"]: </label>
                                            <InputText @bind-Value="loginModel.Email" class="form-control" />
                                        </div>
                                        <ValidationMessage For="@(() => loginModel.Email)" />

                                        <div
                                            class="d-md-flex flex-column flex-md-row justify-content-center align-items-center mb-2">
                                            <label style="min-width: 80px;">@Localizer["Password"]: </label>
                                            <InputText @bind-Value="loginModel.Password" type="password"
                                                class="form-control" />
                                        </div>
                                        <ValidationMessage For="@(() => loginModel.Password)" />
                                    </div>
                                    <div>
                                        <p>@Localizer["NoAccount"] <a class="form-link" href="/register">@Localizer["Register"]</a></p>
                                    </div>
                                    @* Display custom login error message *@
                                    @if (!string.IsNullOrEmpty(loginError))
                                    {
                                        <div class="text-danger mt-1 p-0">
                                            @loginError
                                        </div>
                                    }
                                    <div class="d-flex flex-wrap justify-content-center gap-2 mt-2">
                                        <button type="submit" class="btn btn-primary mb-0"
                                            style="min-width: 160px;">@Localizer["Login"]</button>
                                        <button type="button" class="btn btn-secondary mb-0" style="min-width: 160px;"
                                            @onclick="HandleCancelClick">@Localizer["Cancel"]</button>
                                    </div>
                                    <div class="d-flex flex-wrap justify-content-center gap-2 mt-2">
                                        <div class="text-center">
                                            <button type="button" class="btn bg-gradient-dark w-100 mt-2 mb-4"
                                                @onclick="LoginAsAdmin">Admin</button>
                                        </div>
                                    </div>

                                </EditForm>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>